<div id="left">
    <%@coffeeshops.parse['businesses'].each do |shop|%>
    <div id="info-block">
        <h1><%= shop['name'] %></h1>
        <img src="<%= shop['image_url'] %>" style="width: 300px">

        <div id="info">
            <p><%= shop['rating'] %></p>
            <p><%= shop['location']['city'] %></p>
            <p><%= shop['coordinates']['latitude'] %> <%= shop['coordinates']['longitude'] %></p>
        </div>
    </div>
    <%end%>
</div>

<div id="map-2"></div>

<script>
    function initMap(){
        //Map Options
        var options = {
            zoom: 10,
            center: {lat: 37.5630, lng: -122.3255}
        }

        // New map
        var map = new google.maps.Map(document.getElementById('map-2'), options);


        addMarker({coords: {lat: 37.692222, lng: -122.092735},
            content: '<h3>Castro Valley, CA</h3>'

        });
        addMarker({coords: {lat: 37.6810, lng: -122.1244},
            content: '<h3>San Lorenzo, CA</h3>'
        });
        addMarker({coords: {lat: 37.7947, lng: -122.2772},
            content: '<h3>Jack London Square, CA</h3>'
        });

        //Add Marker Function
        function addMarker(props){
            var marker = new google.maps.Marker({
                position: props.coords,
                map: map,
                icon: '/assets/heart.gif'
            });

            //Check Content
            if(props.content){
                var infoWindow = new google.maps.InfoWindow({
                    content: props.content
                });

                marker.addListener('click', function(){
                    infoWindow.open(map, marker)
                });
            }
        }
    }
</script>

<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAA1ZpBDZ5VJ8zEvv7flM0pUr8RFnGUSdc&callback=initMap">
</script>
